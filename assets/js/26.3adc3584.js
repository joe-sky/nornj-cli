(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{244:function(t,e,s){"use strict";s.r(e);var a=s(0),n=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"build-targets"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build-targets","aria-hidden":"true"}},[t._v("#")]),t._v(" Build Targets")]),t._v(" "),s("p",[t._v("When you run "),s("code",[t._v("vue-cli-service build")]),t._v(", you can specify different build targets via the "),s("code",[t._v("--target")]),t._v(" option. This allows you to use the same code base to produce different builds for different use cases.")]),t._v(" "),s("h2",{attrs:{id:"app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#app","aria-hidden":"true"}},[t._v("#")]),t._v(" App")]),t._v(" "),s("p",[t._v("App is the default build target. In this mode:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("index.html")]),t._v(" with asset and resource hints injection")]),t._v(" "),s("li",[t._v("vendor libraries split into a separate chunk for better caching")]),t._v(" "),s("li",[t._v("static assets under 4kb are inlined into JavaScript")]),t._v(" "),s("li",[t._v("static assets in "),s("code",[t._v("public")]),t._v(" are copied into output directory")])]),t._v(" "),s("h2",{attrs:{id:"library"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#library","aria-hidden":"true"}},[t._v("#")]),t._v(" Library")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note on Vue Dependency")]),t._v(" "),s("p",[t._v("In lib mode, Vue is "),s("em",[t._v("externalized")]),t._v(". This means the bundle will not bundle Vue even if your code imports Vue. If the lib is used via a bundler, it will attempt to load Vue as a dependency through the bundler; otherwise, it falls back to a global "),s("code",[t._v("Vue")]),t._v(" variable.")])]),t._v(" "),s("p",[t._v("You can build a single entry as a library using")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vue-cli-service build --target lib --name myLib [entry]\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("File                     Size                     Gzipped\n\ndist/myLib.umd.min.js    13.28 kb                 8.42 kb\ndist/myLib.umd.js        20.95 kb                 10.22 kb\ndist/myLib.common.js     20.57 kb                 10.09 kb\ndist/myLib.css           0.33 kb                  0.23 kb\n")])])]),s("p",[t._v("The entry can be either a "),s("code",[t._v(".js")]),t._v(" or a "),s("code",[t._v(".vue")]),t._v(" file. If no entry is specified, "),s("code",[t._v("src/App.vue")]),t._v(" will be used.")]),t._v(" "),s("p",[t._v("A lib build outputs:")]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("dist/myLib.common.js")]),t._v(": A CommonJS bundle for consuming via bundlers (unfortunately, webpack currently does not support ES modules output format for bundles yet)")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("dist/myLib.umd.js")]),t._v(": A UMD bundle for consuming directly in browsers or with AMD loaders")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("dist/myLib.umd.min.js")]),t._v(": Minified version of the UMD build.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("dist/myLib.css")]),t._v(": Extracted CSS file (can be forced into inlined by setting "),s("code",[t._v("css: { extract: false }")]),t._v(" in "),s("code",[t._v("vue.config.js")]),t._v(")")])])]),t._v(" "),s("h3",{attrs:{id:"vue-vs-js-ts-entry-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-vs-js-ts-entry-files","aria-hidden":"true"}},[t._v("#")]),t._v(" Vue vs. JS/TS Entry Files")]),t._v(" "),s("p",[t._v("When using a "),s("code",[t._v(".vue")]),t._v(" file as entry, your library will directly expose the Vue component itself, because the component is always the default export.")]),t._v(" "),s("p",[t._v("However, when you are using a "),s("code",[t._v(".js")]),t._v(" or "),s("code",[t._v(".ts")]),t._v(" file as your entry, it may contain named exports, so your library will be exposed as a Module. This means the default export of your library must be accessed as "),s("code",[t._v("window.yourLib.default")]),t._v(" in UMD builds, or as "),s("code",[t._v("const myLib = require('mylib').default")]),t._v(" in CommonJS builds. If you don't have any named exports and wish to directly expose the default export, you can use the following webpack configuration in "),s("code",[t._v("vue.config.js")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  configureWebpack"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    output"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      libraryExport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'default'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"web-component"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#web-component","aria-hidden":"true"}},[t._v("#")]),t._v(" Web Component")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note on Compatibility")]),t._v(" "),s("p",[t._v("Web Component mode does not support IE11 and below. "),s("a",{attrs:{href:"https://github.com/vuejs/vue-web-component-wrapper#compatibility",target:"_blank",rel:"noopener noreferrer"}},[t._v("More details"),s("OutboundLink")],1)])]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Note on Vue Dependency")]),t._v(" "),s("p",[t._v("In web component mode, Vue is "),s("em",[t._v("externalized.")]),t._v(" This means the bundle will not bundle Vue even if your code imports Vue. The bundle will assume "),s("code",[t._v("Vue")]),t._v(" is available on the host page as a global variable.")])]),t._v(" "),s("p",[t._v("You can build a single entry as a web component using")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vue-cli-service build --target wc --name my-element [entry]\n")])])]),s("p",[t._v("Note that the entry should be a "),s("code",[t._v("*.vue")]),t._v(" file. Vue CLI will automatically wrap and register the component as a Web Component for you, and there's no need to do this yourself in "),s("code",[t._v("main.js")]),t._v(". You can use "),s("code",[t._v("main.js")]),t._v(" as a demo app solely for development.")]),t._v(" "),s("p",[t._v("The build will produce a single JavaScript file (and its minified version) with everything inlined. The script, when included on a page, registers the "),s("code",[t._v("<my-element>")]),t._v(" custom element, which wraps the target Vue component using "),s("code",[t._v("@vue/web-component-wrapper")]),t._v(". The wrapper automatically proxies properties, attributes, events and slots. See the "),s("a",{attrs:{href:"https://github.com/vuejs/vue-web-component-wrapper",target:"_blank",rel:"noopener noreferrer"}},[t._v("docs for "),s("code",[t._v("@vue/web-component-wrapper")]),s("OutboundLink")],1),t._v(" for more details.")]),t._v(" "),s("p",[s("strong",[t._v("Note the bundle relies on "),s("code",[t._v("Vue")]),t._v(" being globally available on the page.")])]),t._v(" "),s("p",[t._v("This mode allows consumers of your component to use the Vue component as a normal DOM element:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://unpkg.com/vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("path/to/my-element.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- use in plain HTML, or in any other framework --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("my-element")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("my-element")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"bundle-that-registers-multiple-web-components"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#bundle-that-registers-multiple-web-components","aria-hidden":"true"}},[t._v("#")]),t._v(" Bundle that Registers Multiple Web Components")]),t._v(" "),s("p",[t._v("When building a web component bundle, you can also target multiple components by using a glob as entry:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vue-cli-service build --target wc --name foo 'src/components/*.vue'\n")])])]),s("p",[t._v("When building multiple web components, "),s("code",[t._v("--name")]),t._v(" will be used as the prefix and the custom element name will be inferred from the component filename. For example, with "),s("code",[t._v("--name foo")]),t._v(" and a component named "),s("code",[t._v("HelloWorld.vue")]),t._v(", the resulting custom element will be registered as "),s("code",[t._v("<foo-hello-world>")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"async-web-component"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-web-component","aria-hidden":"true"}},[t._v("#")]),t._v(" Async Web Component")]),t._v(" "),s("p",[t._v("When targeting multiple web components, the bundle may become quite large, and the user may only use a few of the components your bundle registers. The async web component mode produces a code-split bundle with a small entry file that provides the shared runtime between all the components, and registers all the custom elements upfront. The actual implementation of a component is then fetched on-demand only when an instance of the corresponding custom element is used on the page:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("vue-cli-service build --target wc-async --name foo 'src/components/*.vue'\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("File                Size                        Gzipped\n\ndist/foo.0.min.js    12.80 kb                    8.09 kb\ndist/foo.min.js      7.45 kb                     3.17 kb\ndist/foo.1.min.js    2.91 kb                     1.02 kb\ndist/foo.js          22.51 kb                    6.67 kb\ndist/foo.0.js        17.27 kb                    8.83 kb\ndist/foo.1.js        5.24 kb                     1.64 kb\n")])])]),s("p",[t._v("Now on the page, the user only needs to include Vue and the entry file:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://unpkg.com/vue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("path/to/foo.min.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token script"}}),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- foo-one's implementation chunk is auto fetched when it's used --\x3e")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("foo-one")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("foo-one")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])])},[],!1,null,null,null);e.default=n.exports}}]);