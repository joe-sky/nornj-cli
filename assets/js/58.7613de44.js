(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{263:function(e,t,s){"use strict";s.r(t);var a=s(0),r=Object(a.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"cli-服务"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cli-服务","aria-hidden":"true"}},[e._v("#")]),e._v(" CLI 服务")]),e._v(" "),s("h2",{attrs:{id:"使用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用命令","aria-hidden":"true"}},[e._v("#")]),e._v(" 使用命令")]),e._v(" "),s("p",[e._v("在一个 Vue CLI 项目中，"),s("code",[e._v("@vue/cli-service")]),e._v(" 安装了一个名为 "),s("code",[e._v("vue-cli-service")]),e._v(" 的命令。你可以在 npm scripts 中以 "),s("code",[e._v("vue-cli-service")]),e._v("、或者从终端中以 "),s("code",[e._v("./node_modules/.bin/vue-cli-service")]),e._v(" 访问这个命令。")]),e._v(" "),s("p",[e._v("这是你使用默认 preset 的项目的 "),s("code",[e._v("package.json")]),e._v("：")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"serve"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service serve"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service build"')]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("你可以通过 npm 或 Yarn 调用这些 script：")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" run serve\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# OR")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("yarn")]),e._v(" serve\n")])])]),s("p",[e._v("如果你可以使用 "),s("a",{attrs:{href:"https://github.com/zkat/npx",target:"_blank",rel:"noopener noreferrer"}},[e._v("npx"),s("OutboundLink")],1),e._v(" (最新版的 npm 应该已经自带)，也可以直接这样调用命令：")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("npx vue-cli-service serve\n")])])]),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("提示")]),e._v(" "),s("p",[e._v("你可以通过 "),s("code",[e._v("vue ui")]),e._v(" 命令使用 GUI 运行更多的特性脚本。")])]),e._v(" "),s("p",[e._v("这里有一个 GUI 的 webpack Analyzer：")]),e._v(" "),s("p",[s("img",{attrs:{src:"/ui-analyzer.png",alt:"UI webpack Analyzer"}})]),e._v(" "),s("h2",{attrs:{id:"vue-cli-service-serve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-service-serve","aria-hidden":"true"}},[e._v("#")]),e._v(" vue-cli-service serve")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("用法：vue-cli-service serve [options] [entry]\n\n选项：\n\n  --open    在服务器启动时打开浏览器\n  --copy    在服务器启动时将 URL 复制到剪切版\n  --mode    指定环境模式 (默认值：development)\n  --host    指定 host (默认值：0.0.0.0)\n  --port    指定 port (默认值：8080)\n  --https   使用 https (默认值：false)\n")])])]),s("p",[s("code",[e._v("vue-cli-service serve")]),e._v(" 命令会启动一个开发服务器 (基于 "),s("a",{attrs:{href:"https://github.com/webpack/webpack-dev-server",target:"_blank",rel:"noopener noreferrer"}},[e._v("webpack-dev-server"),s("OutboundLink")],1),e._v(") 并附带开箱即用的模块热重载 (Hot-Module-Replacement)。")]),e._v(" "),s("p",[e._v("除了通过命令行参数，你也可以使用 "),s("code",[e._v("vue.config.js")]),e._v(" 里的 "),s("router-link",{attrs:{to:"/zh/config/#devserver"}},[e._v("devServer")]),e._v(" 字段配置开发服务器。")],1),e._v(" "),s("p",[e._v("命令行参数 "),s("code",[e._v("[entry]")]),e._v(" 将被指定为唯一入口，而非额外的追加入口。尝试使用 "),s("code",[e._v("[entry]")]),e._v(" 覆盖 "),s("code",[e._v("config.pages")]),e._v(" 中的 "),s("code",[e._v("entry")]),e._v(" 将可能引发错误。")]),e._v(" "),s("h2",{attrs:{id:"vue-cli-service-build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-service-build","aria-hidden":"true"}},[e._v("#")]),e._v(" vue-cli-service build")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('用法：vue-cli-service build [options] [entry|pattern]\n\n选项：\n\n  --mode        指定环境模式 (默认值：production)\n  --dest        指定输出目录 (默认值：dist)\n  --modern      面向现代浏览器带自动回退地构建应用\n  --target      app | lib | wc | wc-async (默认值：app)\n  --name        库或 Web Components 模式下的名字 (默认值：package.json 中的 "name" 字段或入口文件名)\n  --no-clean    在构建项目之前不清除目标目录\n  --report      生成 report.html 以帮助分析包内容\n  --report-json 生成 report.json 以帮助分析包内容\n  --watch       监听文件变化\n')])])]),s("p",[s("code",[e._v("vue-cli-service build")]),e._v(" 会在 "),s("code",[e._v("dist/")]),e._v(" 目录产生一个可用于生产环境的包，带有 JS/CSS/HTML 的压缩，和为更好的缓存而做的自动的 vendor chunk splitting。它的 chunk manifest 会内联在 HTML 里。")]),e._v(" "),s("p",[e._v("这里还有一些有用的命令参数：")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("--modern")]),e._v(" 使用"),s("router-link",{attrs:{to:"/zh/guide/browser-compatibility.html#现代模式"}},[e._v("现代模式")]),e._v("构建应用，为现代浏览器交付原生支持的 ES2015 代码，并生成一个兼容老浏览器的包用来自动回退。")],1)]),e._v(" "),s("li",[s("p",[s("code",[e._v("--target")]),e._v(" 允许你将项目中的任何组件以一个库或 Web Components 组件的方式进行构建。更多细节请查阅"),s("router-link",{attrs:{to:"/zh/guide/build-targets.html"}},[e._v("构建目标")]),e._v("。")],1)]),e._v(" "),s("li",[s("p",[s("code",[e._v("--report")]),e._v(" 和 "),s("code",[e._v("--report-json")]),e._v(" 会根据构建统计生成报告，它会帮助你分析包中包含的模块们的大小。")])])]),e._v(" "),s("h2",{attrs:{id:"vue-cli-service-inspect"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli-service-inspect","aria-hidden":"true"}},[e._v("#")]),e._v(" vue-cli-service inspect")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("用法：vue-cli-service inspect [options] [...paths]\n\n选项：\n\n  --mode    指定环境模式 (默认值：development)\n")])])]),s("p",[e._v("你可以使用 "),s("code",[e._v("vue-cli-service inspect")]),e._v(" 来审查一个 Vue CLI 项目的 webpack config。更多细节请查阅"),s("router-link",{attrs:{to:"/zh/guide/webpack.html#审查项目的-webpack-config"}},[e._v("审查 webpack config")]),e._v("。")],1),e._v(" "),s("h2",{attrs:{id:"查看所有的可用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查看所有的可用命令","aria-hidden":"true"}},[e._v("#")]),e._v(" 查看所有的可用命令")]),e._v(" "),s("p",[e._v("有些 CLI 插件会向 "),s("code",[e._v("vue-cli-service")]),e._v(" 注入额外的命令。例如 "),s("code",[e._v("@vue/cli-plugin-eslint")]),e._v(" 会注入 "),s("code",[e._v("vue-cli-service lint")]),e._v(" 命令。你可以运行以下命令查看所有注入的命令：")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("npx vue-cli-service "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("help")]),e._v("\n")])])]),s("p",[e._v("你也可以这样学习每个命令可用的选项：")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("npx vue-cli-service "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("help")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("command"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),s("h2",{attrs:{id:"缓存和并行处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#缓存和并行处理","aria-hidden":"true"}},[e._v("#")]),e._v(" 缓存和并行处理")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("cache-loader")]),e._v(" 会默认为 Vue/Babel/TypeScript 编译开启。文件会缓存在 "),s("code",[e._v("node_modules/.cache")]),e._v(" 中——如果你遇到了编译方面的问题，记得先删掉缓存目录之后再试试看。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("thread-loader")]),e._v(" 会在多核 CPU 的机器上为 Babel/TypeScript 转译开启。")])])]),e._v(" "),s("h2",{attrs:{id:"git-hook"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#git-hook","aria-hidden":"true"}},[e._v("#")]),e._v(" Git Hook")]),e._v(" "),s("p",[e._v("在安装之后，"),s("code",[e._v("@vue/cli-service")]),e._v(" 也会安装 "),s("a",{attrs:{href:"https://github.com/yyx990803/yorkie",target:"_blank",rel:"noopener noreferrer"}},[e._v("yorkie"),s("OutboundLink")],1),e._v("，它会让你在 "),s("code",[e._v("package.json")]),e._v(" 的 "),s("code",[e._v("gitHooks")]),e._v(" 字段中方便地指定 Git hook：")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"gitHooks"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"pre-commit"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"lint-staged"')]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[e._v("注意")]),e._v(" "),s("p",[s("code",[e._v("yorkie")]),e._v(" fork 自 "),s("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("husky")]),s("OutboundLink")],1),e._v(" 且并不和之后的版本兼容。")])]),e._v(" "),s("h2",{attrs:{id:"配置时无需-eject"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置时无需-eject","aria-hidden":"true"}},[e._v("#")]),e._v(" 配置时无需 Eject")]),e._v(" "),s("p",[e._v("通过 "),s("code",[e._v("vue create")]),e._v(" 创建的项目无需额外的配置就已经可以跑起来了。插件的设计也是可以相互共存的，所以绝大多数情况下，你只需要在交互式命令提示中选取需要的功能即可。")]),e._v(" "),s("p",[e._v("不过我们也知道满足每一个需求是不太可能的，而且一个项目的需求也会不断改变。通过 Vue CLI 创建的项目让你无需 eject 就能够配置工具的几乎每个角落。更多细节请查阅"),s("router-link",{attrs:{to:"/zh/config/"}},[e._v("配置参考")]),e._v("。")],1)])},[],!1,null,null,null);t.default=r.exports}}]);