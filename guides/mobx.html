<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä½¿ç”¨Mobxç®¡ç†Reactç»„ä»¶çŠ¶æ€ | NornJ CLI</title>
    <meta name="description" content="ğŸ› ï¸ An Easily Configurable and Scalable Scaffolding tool">
    <link rel="icon" href="/nornj-cli/favicon.png">
  <link rel="manifest" href="/nornj-cli/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/nornj-cli/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/nornj-cli/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/nornj-cli/assets/css/0.styles.f5d1342c.css" as="style"><link rel="preload" href="/nornj-cli/assets/js/app.686163a9.js" as="script"><link rel="preload" href="/nornj-cli/assets/js/3.044bb90b.js" as="script"><link rel="preload" href="/nornj-cli/assets/js/43.f8918937.js" as="script"><link rel="prefetch" href="/nornj-cli/assets/js/10.0a4d3748.js"><link rel="prefetch" href="/nornj-cli/assets/js/11.2ebbb2fd.js"><link rel="prefetch" href="/nornj-cli/assets/js/12.9ac6bc63.js"><link rel="prefetch" href="/nornj-cli/assets/js/13.49145699.js"><link rel="prefetch" href="/nornj-cli/assets/js/14.a9d9287f.js"><link rel="prefetch" href="/nornj-cli/assets/js/15.0d36d88f.js"><link rel="prefetch" href="/nornj-cli/assets/js/16.f212924f.js"><link rel="prefetch" href="/nornj-cli/assets/js/17.37902f37.js"><link rel="prefetch" href="/nornj-cli/assets/js/18.774d9cc7.js"><link rel="prefetch" href="/nornj-cli/assets/js/19.0d32d613.js"><link rel="prefetch" href="/nornj-cli/assets/js/20.dbae6c26.js"><link rel="prefetch" href="/nornj-cli/assets/js/21.07063763.js"><link rel="prefetch" href="/nornj-cli/assets/js/22.ca62bc95.js"><link rel="prefetch" href="/nornj-cli/assets/js/23.fe8f5adc.js"><link rel="prefetch" href="/nornj-cli/assets/js/24.9ae085bd.js"><link rel="prefetch" href="/nornj-cli/assets/js/25.87d9c92d.js"><link rel="prefetch" href="/nornj-cli/assets/js/26.c4ad5084.js"><link rel="prefetch" href="/nornj-cli/assets/js/27.b1233d47.js"><link rel="prefetch" href="/nornj-cli/assets/js/28.47461ace.js"><link rel="prefetch" href="/nornj-cli/assets/js/29.c6b4b8fa.js"><link rel="prefetch" href="/nornj-cli/assets/js/30.80a2b130.js"><link rel="prefetch" href="/nornj-cli/assets/js/31.6871cab6.js"><link rel="prefetch" href="/nornj-cli/assets/js/32.fc5f23f1.js"><link rel="prefetch" href="/nornj-cli/assets/js/33.9fcda592.js"><link rel="prefetch" href="/nornj-cli/assets/js/34.e736b311.js"><link rel="prefetch" href="/nornj-cli/assets/js/35.2b444282.js"><link rel="prefetch" href="/nornj-cli/assets/js/36.b5d3db4f.js"><link rel="prefetch" href="/nornj-cli/assets/js/37.ad199bee.js"><link rel="prefetch" href="/nornj-cli/assets/js/38.fbfa272a.js"><link rel="prefetch" href="/nornj-cli/assets/js/39.0bb56207.js"><link rel="prefetch" href="/nornj-cli/assets/js/4.1977180c.js"><link rel="prefetch" href="/nornj-cli/assets/js/40.e715c128.js"><link rel="prefetch" href="/nornj-cli/assets/js/41.6e30741f.js"><link rel="prefetch" href="/nornj-cli/assets/js/42.289b69ed.js"><link rel="prefetch" href="/nornj-cli/assets/js/44.f2dbff78.js"><link rel="prefetch" href="/nornj-cli/assets/js/45.be3e8f82.js"><link rel="prefetch" href="/nornj-cli/assets/js/46.966c5906.js"><link rel="prefetch" href="/nornj-cli/assets/js/47.2eed340f.js"><link rel="prefetch" href="/nornj-cli/assets/js/48.0c213771.js"><link rel="prefetch" href="/nornj-cli/assets/js/49.85af6ff5.js"><link rel="prefetch" href="/nornj-cli/assets/js/5.a60171ae.js"><link rel="prefetch" href="/nornj-cli/assets/js/50.5def39c8.js"><link rel="prefetch" href="/nornj-cli/assets/js/51.23c90d3a.js"><link rel="prefetch" href="/nornj-cli/assets/js/52.df5b773f.js"><link rel="prefetch" href="/nornj-cli/assets/js/53.9165aa40.js"><link rel="prefetch" href="/nornj-cli/assets/js/54.91f3f8b9.js"><link rel="prefetch" href="/nornj-cli/assets/js/55.46b97f76.js"><link rel="prefetch" href="/nornj-cli/assets/js/56.8b9d0651.js"><link rel="prefetch" href="/nornj-cli/assets/js/57.229a5a7e.js"><link rel="prefetch" href="/nornj-cli/assets/js/58.2ae71627.js"><link rel="prefetch" href="/nornj-cli/assets/js/59.d505c987.js"><link rel="prefetch" href="/nornj-cli/assets/js/6.0d9aa54c.js"><link rel="prefetch" href="/nornj-cli/assets/js/60.7a0b871c.js"><link rel="prefetch" href="/nornj-cli/assets/js/61.8af7441b.js"><link rel="prefetch" href="/nornj-cli/assets/js/62.b0a54e74.js"><link rel="prefetch" href="/nornj-cli/assets/js/63.d39ac98c.js"><link rel="prefetch" href="/nornj-cli/assets/js/64.e1e9700e.js"><link rel="prefetch" href="/nornj-cli/assets/js/65.66d3ff3c.js"><link rel="prefetch" href="/nornj-cli/assets/js/66.c71e7509.js"><link rel="prefetch" href="/nornj-cli/assets/js/67.97e4fe4a.js"><link rel="prefetch" href="/nornj-cli/assets/js/68.7e261eed.js"><link rel="prefetch" href="/nornj-cli/assets/js/7.76f89e11.js"><link rel="prefetch" href="/nornj-cli/assets/js/8.84b46711.js"><link rel="prefetch" href="/nornj-cli/assets/js/9.cd6c0148.js"><link rel="prefetch" href="/nornj-cli/assets/js/vendors~docsearch.135fa21b.js">
    <link rel="stylesheet" href="/nornj-cli/assets/css/0.styles.f5d1342c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/nornj-cli/" class="home-link router-link-active"><!----> <span class="site-name">NornJ CLI</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"><div class="nav-item"><a href="/nornj-cli/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/nornj-cli/config/" class="nav-link">Config Reference</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Plugin Dev Guide</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/plugin-dev.html" class="nav-link">Plugin Dev Guide</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-info.html" class="nav-link">UI Plugin Info</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-api.html" class="nav-link">UI Plugin API</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-localization.html" class="nav-link">UI Localization</a></li></ul></div></div><div class="nav-item"><a href="/nornj-cli/core-plugins/" class="nav-link">Plugins</a></div><div class="nav-item"><a href="https://github.com/vuejs/vue-cli/blob/dev/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nornj-cli/guides/mobx.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/zh/" class="nav-link">ç®€ä½“ä¸­æ–‡</a></li></ul></div></div> <a href="https://github.com/joe-sky/nornj-cli" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/nornj-cli/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/nornj-cli/config/" class="nav-link">Config Reference</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Plugin Dev Guide</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/plugin-dev.html" class="nav-link">Plugin Dev Guide</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-info.html" class="nav-link">UI Plugin Info</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-api.html" class="nav-link">UI Plugin API</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/dev-guide/ui-localization.html" class="nav-link">UI Localization</a></li></ul></div></div><div class="nav-item"><a href="/nornj-cli/core-plugins/" class="nav-link">Plugins</a></div><div class="nav-item"><a href="https://github.com/vuejs/vue-cli/blob/dev/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/nornj-cli/guides/mobx.html" class="nav-link router-link-exact-active router-link-active">English</a></li><li class="dropdown-item"><!----> <a href="/nornj-cli/zh/" class="nav-link">ç®€ä½“ä¸­æ–‡</a></li></ul></div></div> <a href="https://github.com/joe-sky/nornj-cli" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ä½¿ç”¨mobxç®¡ç†reactç»„ä»¶çŠ¶æ€"><a href="#ä½¿ç”¨mobxç®¡ç†reactç»„ä»¶çŠ¶æ€" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨Mobxç®¡ç†Reactç»„ä»¶çŠ¶æ€</h1> <p><code>React</code>æŠ€æœ¯æ ˆä¸­æœ€å¸¸ç”¨çš„çŠ¶æ€ç®¡ç†åº“æ˜¯<code>Redux</code>ï¼Œç›¸å…³çš„æŠ€æœ¯ç”Ÿæ€ä¹Ÿéå¸¸å®Œå–„ã€‚ä½†æ˜¯<code>Redux</code>éµå¾ªä¸¥æ ¼çš„å‡½æ•°å¼ç¼–ç¨‹è§„èŒƒï¼Œéœ€è¦å­¦ä¹ çš„ç›¸å…³æŠ€æœ¯å¾ˆå¤šä¸Šæ‰‹è¾ƒä¸ºå›°éš¾ï¼Œä¸”åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éœ€è¦è¿›è¡Œé¢å¤–çš„æ€§èƒ½ä¼˜åŒ–ã€‚</p> <p><code>Mobx</code>ä¸<code>Vue</code>åŒæ ·åŸºäº<code>å“åº”å¼ç¼–ç¨‹</code>è®¾è®¡ï¼Œå¯ä½œä¸º<code>Redux</code>çš„é¦–é€‰æ›¿ä»£æ–¹æ¡ˆã€‚å…¶APIç®€å•å®¹æ˜“ç†è§£ï¼Œæ›´å¯è®©å¼€å‘äººå‘˜äº«å—<code>å“åº”å¼ç¼–ç¨‹</code>çš„ä¾¿æ·å¼€å‘ä½“éªŒï¼Œé€šå¸¸æ— éœ€ä¼˜åŒ–ä¹Ÿå¯ä¿è¯é«˜æ€§èƒ½ï¼Œæ•…å¯ä½œä¸º<code>NornJ-cli</code>çš„é¦–é€‰<code>React</code>çŠ¶æ€ç®¡ç†åº“ã€‚</p> <h2 id="ä½¿ç”¨-observableè£…é¥°å™¨åˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡"><a href="#ä½¿ç”¨-observableè£…é¥°å™¨åˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨@observableè£…é¥°å™¨åˆ›å»ºå¯è§‚å¯Ÿå¯¹è±¡</h2> <p><code>Mobx</code>ä¸ºReactå¼€å‘æä¾›çš„æœ€æ ¸å¿ƒçš„éƒ¨åˆ†å°±æ˜¯<code>observable</code>å˜é‡ï¼Œä½¿ç”¨å®ƒåŸºæœ¬å¯ä»¥å®Œå…¨æ›¿ä»£<code>setState</code>å‡½æ•°ï¼Œç”¨éå¸¸ä¾¿æ·çš„æ–¹å¼ä¸ºReactç»„ä»¶æ›´æ–°çŠ¶æ€ã€‚</p> <ul><li>åœ¨Reactç»„ä»¶çš„classä¸­ä½¿ç”¨observableå˜é‡æ›´æ–°æ•°æ®</li></ul> <ol><li>åœ¨helloWorld.jsä¸­å®šä¹‰observableå˜é‡ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> observer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> registerTmpl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'nornj-react'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> autobind <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'core-decorators'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> tmpls <span class="token keyword">from</span> <span class="token string">'./helloWorld.t.html'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styles <span class="token keyword">from</span> <span class="token string">'./helloWorld.m.scss'</span><span class="token punctuation">;</span>

@<span class="token function">registerTmpl</span><span class="token punctuation">(</span><span class="token string">'HelloWorld'</span><span class="token punctuation">)</span>
@observer  <span class="token comment">//éœ€è¦ä¸ºReactç»„ä»¶æ·»åŠ observerè£…é¥°å™¨</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  @observable msg <span class="token operator">=</span> <span class="token string">'Welcome to Your React.js App'</span><span class="token punctuation">;</span>

  @autobind
  <span class="token function">onInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åœ¨æ–‡æœ¬æ¡†å†…å®¹å˜åŒ–äº‹ä»¶ä¸­ä¿®æ”¹observableå˜é‡msgçš„å€¼åï¼Œä¼šè‡ªåŠ¨è§¦å‘æ¨¡æ¿ä¸­çš„æ¸²æŸ“å†…å®¹æ›´æ–°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>msg <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> tmpls<span class="token punctuation">.</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      styles
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>åœ¨helloWorld.t.htmlä½¿ç”¨observableå˜é‡å±•ç¤ºæ•°æ®ï¼š</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>helloWorld<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>{styles.hello}</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span>{msg}</span> <span class="token attr-name">onChange</span><span class="token attr-value"><span class="token punctuation">=</span>{onInputChange}</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>æ›´å¤š@observableçš„è¯¦ç»†æ–‡æ¡£è¯·æŸ¥çœ‹<a href="http://cn.mobx.js.org/refguide/observable-decorator.html" target="_blank" rel="noopener noreferrer">Mobxä¸­æ–‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <h2 id="ä½¿ç”¨-computedè£…é¥°å™¨åˆ›å»ºè®¡ç®—å±æ€§"><a href="#ä½¿ç”¨-computedè£…é¥°å™¨åˆ›å»ºè®¡ç®—å±æ€§" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨@computedè£…é¥°å™¨åˆ›å»ºè®¡ç®—å±æ€§</h2> <p>å¦‚è¦å°†ä¸Šä¾‹ä¸­çš„msgä¿¡æ¯æ”¹ä¸ºç”±å¤šä¸ªéƒ¨åˆ†æ‹¼æ¥è€Œæˆï¼Œåˆ™å¯ä»¥ä½¿ç”¨<code>computed</code>(è®¡ç®—å±æ€§)æ¥è¿”å›è®¡ç®—ç»“æœã€‚</p> <ul><li>åœ¨Reactç»„ä»¶çš„classä¸­ä½¿ç”¨computedæ›´æ–°æ•°æ®</li></ul> <ol><li>åœ¨helloWorld.jsä¸­å®šä¹‰computedï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> observable<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

@<span class="token function">registerTmpl</span><span class="token punctuation">(</span><span class="token string">'HelloWorld'</span><span class="token punctuation">)</span>
@observer
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  @observable framework <span class="token operator">=</span> <span class="token string">'React'</span><span class="token punctuation">;</span>

  @computed <span class="token keyword">get</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'Welcome to Your '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">+</span> <span class="token string">'.js App'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  @autobind
  <span class="token function">onInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//åœ¨æ–‡æœ¬æ¡†å†…å®¹å˜åŒ–äº‹ä»¶ä¸­ä¿®æ”¹observableå˜é‡frameworkçš„å€¼åï¼Œä¼šè‡ªåŠ¨è§¦å‘msgè®¡ç®—å±æ€§çš„æ›´æ–°ï¼Œå¹¶è§¦å‘æ¨¡æ¿ä¸­çš„æ¸²æŸ“å†…å®¹æ›´æ–°</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>framework <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> tmpls<span class="token punctuation">.</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      styles
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>åœ¨helloWorld.t.htmlä½¿ç”¨computedå±•ç¤ºæ•°æ®ï¼š</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>helloWorld<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>{styles.hello}</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- computedåœ¨ä½¿ç”¨æ—¶å’Œobservableå˜é‡çš„å†™æ³•ç›¸åŒ --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span>{msg}</span> <span class="token attr-name">onChange</span><span class="token attr-value"><span class="token punctuation">=</span>{onInputChange}</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>åˆ©ç”¨computed(è®¡ç®—å±æ€§)ä¹Ÿå¯ä»¥å®ç°å¾ˆå¤šå¤æ‚çš„è‡ªåŠ¨è®¡ç®—é€»è¾‘ï¼Œæ›´å¤šæ–‡æ¡£è¯·æŸ¥çœ‹<a href="http://cn.mobx.js.org/refguide/computed-decorator.html" target="_blank" rel="noopener noreferrer">Mobxä¸­æ–‡æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <h2 id="ä½¿ç”¨mobx-state-treeæ„å»ºstore"><a href="#ä½¿ç”¨mobx-state-treeæ„å»ºstore" aria-hidden="true" class="header-anchor">#</a> ä½¿ç”¨Mobx-state-treeæ„å»ºstore</h2> <p><code>mobx-state-tree</code>æ˜¯<code>Mobx</code>çš„çŠ¶æ€å®¹å™¨æ–¹æ¡ˆï¼Œå®ƒä»¥æ›´åŠ è§„èŒƒåŒ–çš„è¯­æ³•ä¸º<code>React</code>åœ¨ç‹¬ç«‹çš„<code>store</code>ä¸­ç®¡ç†çŠ¶æ€ï¼Œä½œç”¨ç±»ä¼¼äº<code>Vue</code>ç”Ÿæ€ä¸­çš„<code>Vuex</code>ï¼Œéå¸¸é€‚åˆå¤§å‹å•é¡µwebåº”ç”¨ã€‚</p> <p>åœ¨<code>NornJ-cli</code>çš„<code>react-mst</code>æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬é»˜è®¤ä½¿ç”¨<code>mobx-state-tree</code>æ¥åˆ›å»º<code>store</code>æ¥ç®¡ç†ä»åç«¯è·å–çš„å„ç»„ä»¶æ•°æ®å˜é‡ï¼Œå­˜æ”¾åœ¨ç‹¬ç«‹çš„<code>stores</code>æ–‡ä»¶ç›®å½•å†…ã€‚</p> <h3 id="storesç›®å½•ç»“æ„"><a href="#storesç›®å½•ç»“æ„" aria-hidden="true" class="header-anchor">#</a> storesç›®å½•ç»“æ„</h3> <div class="language- extra-class"><pre class="language-text"><code>.
â”œâ”€â”€ src                               # æºä»£ç 
    â”œâ”€â”€ stores                          # æ•°æ®é›†
        â”œâ”€â”€ pages                         # åŠŸèƒ½é¡µé¢Store
            â”œâ”€â”€ page1Store.js              # é¡µé¢1Store
            â”œâ”€â”€ page2Store.js              # é¡µé¢2Store
            ...       
        â”œâ”€â”€ commonStore.js                # é€šç”¨Store
        â”œâ”€â”€ headerStore.js                # å¤´éƒ¨Store
        â”œâ”€â”€ siderStore.js                 # ä¾§è¾¹æ Store
        â””â”€â”€ rootStore.js                  # æ ¹Store
</code></pre></div><p>å¦‚ä¸Šï¼Œåœ¨<code>src/stores</code>ç›®å½•å†…å­˜æ”¾äº†å„ç±»<code>store</code>ï¼Œå…¶ä¸­æœ‰ï¼š</p> <ul><li>å„é¡µé¢çš„store</li></ul> <p>å„é¡µé¢çš„<code>store</code>å­˜æ”¾åœ¨pagesç›®å½•å†…ï¼Œæ¯ä¸ªé¡µé¢ä¼šåˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„<code>store</code>ã€‚</p> <ul><li>commonStoreã€headerStoreã€siderStore</li></ul> <p>é¡µé¢å„éƒ¨åˆ†é€šç”¨åŠŸèƒ½çš„<code>store</code>ã€‚</p> <ul><li>rootStore</li></ul> <p>æ ¹èŠ‚ç‚¹<code>store</code>ï¼Œå®ƒé‡Œé¢å¼•å…¥äº†ä¸Šè¿°æ‰€æœ‰çš„<code>store</code>å¹¶åšä¸€äº›åˆå§‹åŒ–é…ç½®ï¼Œæœ€ç»ˆå½¢æˆä¸€æ£µ<code>å…¨å±€å•ä¸€storeæ ‘</code>ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> types <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;mobx-state-tree&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CommonStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./commonStore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> HeaderStore <span class="token keyword">from</span> <span class="token string">&quot;./headerStore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> SiderStore <span class="token keyword">from</span> <span class="token string">&quot;./siderStore&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Page1Store <span class="token keyword">from</span> <span class="token string">&quot;./pages/page1Store&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Page2Store <span class="token keyword">from</span> <span class="token string">&quot;./pages/page2Store&quot;</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

<span class="token keyword">const</span> RootStore <span class="token operator">=</span> types<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;RootStore&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  common<span class="token punctuation">:</span> types<span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>CommonStore<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  page1<span class="token punctuation">:</span> types<span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>Page1Store<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> RootStore<span class="token punctuation">;</span>
</code></pre></div><h3 id="åˆ›å»ºå„é¡µé¢çš„store"><a href="#åˆ›å»ºå„é¡µé¢çš„store" aria-hidden="true" class="header-anchor">#</a> åˆ›å»ºå„é¡µé¢çš„store</h3> <p>ç”¨<a href="https://github.com/joe-sky/nornj-cli/blob/master/docs/guides/gettingStarted.md#%E8%BF%90%E8%A1%8C%E6%96%B0%E6%B7%BB%E5%8A%A0%E7%9A%84%E9%A1%B5%E9%9D%A2" target="_blank" rel="noopener noreferrer">å¿«é€Ÿèµ·æ­¥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ä¸€èŠ‚ä¸­æåˆ°çš„<code>nj ap</code>å‘½ä»¤åˆ›å»ºæ–°é¡µé¢æ—¶ï¼Œç›¸åº”é¡µé¢çš„<code>store</code>ä¹Ÿä¼šåœ¨<code>src/stores/pages</code>å†…ä¸€èµ·åˆ›å»ºã€‚</p> <p>æ¯ä¸ª<code>store</code>çš„ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> types <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;mobx-state-tree&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fetchData <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'flarej/lib/utils/fetchConfig'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> Notification <span class="token keyword">from</span> <span class="token string">'../../utils/notification'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Page1Store <span class="token operator">=</span> types<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">&quot;Page1Store&quot;</span><span class="token punctuation">,</span>  <span class="token comment">//storeåç§°</span>
  <span class="token comment">//æ­¤å¤„å¯æ”¾ç½®å¼ºåˆ¶ç±»å‹æ£€æµ‹çš„observableå˜é‡</span>
  <span class="token punctuation">{</span>  
    isDisable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>                                   <span class="token comment">//å¯ç›´æ¥å¡«å†™ç®€å•ç±»å‹å€¼ï¼Œä¼šè‡ªåŠ¨æ¨æ–­å®é™…ç±»å‹</span>
    framework<span class="token punctuation">:</span> types<span class="token punctuation">.</span><span class="token function">optional</span><span class="token punctuation">(</span>types<span class="token punctuation">.</span>string<span class="token punctuation">,</span> <span class="token string">'React'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">//é™å®šä¸ºstringç±»å‹å€¼ï¼Œé»˜è®¤å€¼ç”¨&quot;React&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">//æ­¤å¤„å¯æ”¾ç½®ä¸é™ç±»å‹çš„observableå˜é‡</span>
  <span class="token punctuation">.</span><span class="token function">volatile</span><span class="token punctuation">(</span><span class="token parameter">self</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    tableData<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">//é€šå¸¸å¯æ”¾ç½®ä¸€äº›ç»“æ„è¾ƒå¤æ‚çš„æ•°æ®ç±»å‹</span>
    menuIds<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">//æ­¤å¤„å¯æ”¾ç½®è®¡ç®—å±æ€§</span>
  <span class="token punctuation">.</span><span class="token function">views</span><span class="token punctuation">(</span><span class="token parameter">self</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token keyword">get</span> <span class="token function">msg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token string">'Welcome to Your '</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>framework <span class="token operator">+</span> <span class="token string">'.js App'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token comment">//æ­¤å¤„å¯æ”¾ç½®å„action</span>
  <span class="token punctuation">.</span><span class="token function">actions</span><span class="token punctuation">(</span><span class="token parameter">self</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setFramework</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      self<span class="token punctuation">.</span>framework <span class="token operator">=</span> v<span class="token punctuation">;</span>  <span class="token comment">//åªæœ‰åœ¨actionä¸­æ‰èƒ½æ”¹å˜storeä¸­çš„å˜é‡</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">//è·å–åç«¯æ•°æ®å¯ç»Ÿä¸€éƒ½å®šä¹‰åœ¨storeçš„actionä¸­</span>
    <span class="token function">getTableData</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fetchData</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__HOST<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/page1/getTableData`</span></span><span class="token punctuation">,</span>
        self<span class="token punctuation">.</span>setTableData<span class="token punctuation">,</span>  <span class="token comment">//å°†ä¸‹é¢å®šä¹‰çš„setTableDataä½œä¸ºfetchçš„å›è°ƒæ–¹æ³•</span>
        params<span class="token punctuation">,</span> <span class="token punctuation">{</span> method<span class="token punctuation">:</span> <span class="token string">'get'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">ex</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        Notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          description<span class="token punctuation">:</span> <span class="token string">'è·å–è¡¨æ ¼æ•°æ®å¼‚å¸¸:'</span> <span class="token operator">+</span> ex<span class="token punctuation">,</span>
          duration<span class="token punctuation">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token function">setTableData</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        self<span class="token punctuation">.</span>tableData <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">;</span>  <span class="token comment">//ä½¿ç”¨åç«¯è·å–çš„æ•°æ®ä¿®æ”¹storeä¸­çš„ç›¸åº”å˜é‡</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        Notification<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          description<span class="token punctuation">:</span> <span class="token string">'è·å–è¡¨æ ¼æ•°æ®é”™è¯¯:'</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>message<span class="token punctuation">,</span>
          duration<span class="token punctuation">:</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åŒ<code>Redux</code>æˆ–<code>Vuex</code>æ¯”è¾ƒç±»ä¼¼ï¼Œ<code>mobx-state-tree</code>çš„storeä¹Ÿåªèƒ½åœ¨<code>action</code>ä¸­ä¿®æ”¹storeä¸­çš„å˜é‡ã€‚</p> <h3 id="åœ¨å„é¡µé¢çš„reactç»„ä»¶ä¸­ä½¿ç”¨storeä¸­çš„å˜é‡"><a href="#åœ¨å„é¡µé¢çš„reactç»„ä»¶ä¸­ä½¿ç”¨storeä¸­çš„å˜é‡" aria-hidden="true" class="header-anchor">#</a> åœ¨å„é¡µé¢çš„Reactç»„ä»¶ä¸­ä½¿ç”¨storeä¸­çš„å˜é‡</h3> <p>æˆ‘ä»¬å°†ä¸Šé¢ä½¿ç”¨@observableçš„ä¾‹å­æ”¹å†™ä¸ºä½¿ç”¨storeä¸­çš„æ•°æ®ã€‚</p> <ol><li>åœ¨helloWorld.jsä¸­è·å–storeå¹¶ä½¿ç”¨ï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> observable<span class="token punctuation">,</span> computed <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> observer<span class="token punctuation">,</span> inject <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'mobx-react'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

@<span class="token function">registerTmpl</span><span class="token punctuation">(</span><span class="token string">'HelloWorld'</span><span class="token punctuation">)</span>
@<span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'store'</span><span class="token punctuation">)</span>  <span class="token comment">//é€šè¿‡injectæ³¨å…¥store</span>
@observer
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  @autobind
  <span class="token function">onInputChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//ä»ç»„ä»¶çš„propsä¸­è·å–ç›¸åº”é¡µé¢çš„store</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> store<span class="token punctuation">:</span> <span class="token punctuation">{</span> page1 <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>  

    <span class="token comment">//è°ƒç”¨storeä¸­çš„actionä¿®æ”¹å€¼</span>
    page1<span class="token punctuation">.</span><span class="token function">setFramework</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> store<span class="token punctuation">:</span> <span class="token punctuation">{</span> page1 <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

    <span class="token keyword">return</span> tmpls<span class="token punctuation">.</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      styles<span class="token punctuation">,</span>
      page1  <span class="token comment">//å°†é¡µé¢çš„storeä¼ å…¥æ¨¡æ¿ä¸­</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>åœ¨helloWorld.t.htmlä½¿ç”¨storeä¸­çš„å€¼å±•ç¤ºæ•°æ®ï¼š</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>helloWorld<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>{styles.hello}</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span>{page1.msg}</span> <span class="token attr-name">onChange</span><span class="token attr-value"><span class="token punctuation">=</span>{onInputChange}</span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="è°ƒç”¨storeä¸­çš„actionè¯·æ±‚åç«¯æ•°æ®"><a href="#è°ƒç”¨storeä¸­çš„actionè¯·æ±‚åç«¯æ•°æ®" aria-hidden="true" class="header-anchor">#</a> è°ƒç”¨storeä¸­çš„actionè¯·æ±‚åç«¯æ•°æ®</h3> <ol><li>åœ¨helloWorld.jsä¸­è°ƒç”¨actionï¼š</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Message <span class="token keyword">from</span> <span class="token string">'flarej/lib/components/antd/message'</span><span class="token punctuation">;</span>
<span class="token operator">...</span>

@<span class="token function">registerTmpl</span><span class="token punctuation">(</span><span class="token string">'HelloWorld'</span><span class="token punctuation">)</span>
@<span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'store'</span><span class="token punctuation">)</span>
@observer
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">HelloWorld</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> store<span class="token punctuation">:</span> <span class="token punctuation">{</span> page1 <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

    <span class="token comment">//åœ¨ç»„ä»¶åˆå§‹åŒ–æ—¶è¯·æ±‚åç«¯æ•°æ®</span>
    <span class="token keyword">const</span> closeLoading <span class="token operator">=</span> Message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token string">'æ­£åœ¨è·å–æ•°æ®...'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    page1<span class="token punctuation">.</span>getTableData<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">closeLoading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> store<span class="token punctuation">:</span> <span class="token punctuation">{</span> page1 <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">;</span>

    <span class="token keyword">return</span> tmpls<span class="token punctuation">.</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      styles<span class="token punctuation">,</span>
      page1
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="2"><li>åœ¨helloWorld.t.htmlä½¿ç”¨storeä¸­çš„å€¼å±•ç¤ºæ•°æ®ï¼š</li></ol> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>helloWorld<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span>{styles.hello}</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- å¾ªç¯trå±•ç¤ºè¡¨æ ¼æ•°æ® --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#each</span> <span class="token attr-name">{page1.tableData}</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>#each</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å…³äº<code>mobx-state-tree</code>çš„æ›´å¤šè¯¦ç»†ä½¿ç”¨æ–¹å¼è¯·æŸ¥çœ‹<a href="https://github.com/mobxjs/mobx-state-tree/blob/master/README.md" target="_blank" rel="noopener noreferrer">MSTå®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚</p> <p align="left">â† <a href="overview.md"><b>è¿”å›æ€»è§ˆ</b></a></p> <p align="right"><a href="httpRequest.md"><b>ä½¿ç”¨fetchè¯·æ±‚æœåŠ¡ç«¯æ•°æ®</b></a> â†’</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/joe-sky/nornj-cli/edit/master/docs/guides/mobx.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/25/2018, 8:13:32 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/nornj-cli/assets/js/app.686163a9.js" defer></script><script src="/nornj-cli/assets/js/3.044bb90b.js" defer></script><script src="/nornj-cli/assets/js/43.f8918937.js" defer></script>
  </body>
</html>
